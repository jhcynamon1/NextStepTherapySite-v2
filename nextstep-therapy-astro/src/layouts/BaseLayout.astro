---
// Base layout for all therapy practice pages
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import StructuredData from '../components/StructuredData.astro';

interface Props {
	title: string;
	description: string;
	canonical?: string;
	structuredDataType?: 'homepage' | 'service' | 'about';
	serviceName?: string;
	serviceDescription?: string;
	robots?: string;
	additionalStructuredData?: Record<string, any>[];
}

const {
	title,
	description,
	canonical = "https://nextsteptherapy.ca",
	structuredDataType = 'homepage',
	serviceName,
	serviceDescription,
	robots = 'index, follow',
	additionalStructuredData = []
} = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
		<meta name="generator" content={Astro.generator} />

		<!-- SEO Meta Tags -->
		<title>{title}</title>
		<meta name="description" content={description} />
		<link rel="canonical" href={canonical} />

		<!-- Open Graph -->
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:type" content="website" />
		<meta property="og:url" content={canonical} />

		<!-- Favicon -->
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon.png" />

		<!-- Additional SEO Meta Tags -->
		<meta name="robots" content={robots} />
		<meta name="author" content="Jesse Cynamon, Registered Psychotherapist" />
		<meta name="geo.region" content="CA-ON" />
		<meta name="geo.placename" content="Ontario, Canada" />
		<meta name="ICBM" content="43.6532, -79.3832" />

		<!-- Professional Healthcare Keywords -->
		<meta name="keywords" content="therapy Ontario, ACT therapy, performance anxiety, workplace stress, men's mental health, psychotherapist Toronto, CRPO registered" />

		<!-- Sitemap -->
		<link rel="sitemap" type="application/xml" href="/sitemap.xml" />

		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

		<!-- Structured Data for SEO -->
		<StructuredData
			type={structuredDataType}
			serviceName={serviceName}
			serviceDescription={serviceDescription}
		/>
		{additionalStructuredData.map((item) => (
			<script type="application/ld+json" set:html={JSON.stringify(item)}></script>
		))}

		<slot name="head" />

		<!-- Global Styles -->
		<style>
			/* Global Professional Healthcare Styles */
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
				line-height: 1.6;
				color: #333;
				background: #fff;
				-webkit-font-smoothing: antialiased;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 0 20px;
			}

			/* Professional Button Styles */
			.btn {
				display: inline-block;
				padding: 12px 24px;
				border-radius: 6px;
				text-decoration: none;
				font-weight: 600;
				transition: all 0.2s;
				border: 2px solid transparent;
				cursor: pointer;
			}

			.btn-primary {
				background: #2563eb;
				color: white;
				border-color: #2563eb;
			}

			.btn-primary:hover {
				background: #1d4ed8;
				border-color: #1d4ed8;
				transform: translateY(-1px);
			}

			.btn-secondary {
				background: transparent;
				color: #2563eb;
				border-color: #2563eb;
			}

			.btn-secondary:hover {
				background: #2563eb;
				color: white;
				transform: translateY(-1px);
			}

			/* Section Styles */
			.section {
				padding: 5rem 0;
			}

			.section-title {
				font-size: 2.5rem;
				font-weight: 700;
				text-align: center;
				margin-bottom: 3rem;
				color: #1e293b;
			}

			.section-subtitle {
				font-size: 1.25rem;
				text-align: center;
				color: #64748b;
				margin-bottom: 3rem;
				max-width: 600px;
				margin-left: auto;
				margin-right: auto;
			}

			/* Card Styles */
			.card {
				background: white;
				padding: 2rem;
				border-radius: 8px;
				box-shadow: 0 1px 3px rgba(0,0,0,0.1);
				transition: transform 0.2s, box-shadow 0.2s;
			}

			.card:hover {
				transform: translateY(-2px);
				box-shadow: 0 4px 12px rgba(0,0,0,0.15);
			}

			/* Grid Styles */
			.grid {
				display: grid;
				gap: 2rem;
			}

			.grid-2 {
				grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
			}

			.grid-3 {
				grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
			}

			/* Professional Typography */
			h1, h2, h3, h4, h5, h6 {
				font-weight: 600;
				line-height: 1.3;
				color: #1e293b;
			}

			p {
				color: #64748b;
				margin-bottom: 1rem;
			}

			a {
				color: #2563eb;
				text-decoration: none;
				transition: color 0.2s;
			}

			a:hover {
				color: #1d4ed8;
			}

			/* Mobile Optimizations */
			@media (max-width: 768px) {
				.section {
					padding: 3rem 0;
				}

				.section-title {
					font-size: 2rem;
				}

				.section-subtitle {
					font-size: 1.1rem;
				}

				.grid {
					grid-template-columns: 1fr;
				}
			}

			/* Accessibility */
			.skip-link {
				position: absolute;
				top: -40px;
				left: 6px;
				background: #2563eb;
				color: white;
				padding: 8px;
				text-decoration: none;
				border-radius: 4px;
				z-index: 1000;
			}

			.skip-link:focus {
				top: 6px;
			}
		</style>
	</head>
	<body>
		<a href="#main-content" class="skip-link">Skip to main content</a>

		<Header />

		<main id="main-content">
			<slot />
		</main>

		<Footer />
	</body>
</html>