<!DOCTYPE html>
<html>
<head>
    <title>Title Checker</title>
    <!-- Ahrefs Analytics -->
    <script src="https://analytics.ahrefs.com/analytics.js" data-key="O1gjE3UGMPbfTSmzGXA8Nw" async></script>
</head>
<body>
    <h1>What Title is Actually Showing?</h1>
    <p>Let me check what title browsers are actually displaying...</p>

    <script>
        // Function to open page and check its title
        function checkPageTitle(url, pageName) {
            const link = document.createElement('a');
            link.href = url;
            link.target = '_blank';
            link.textContent = `Open ${pageName}`;
            link.onclick = function() {
                setTimeout(() => {
                    // Check title of current page
                    const result = document.getElementById('results');
                    result.innerHTML += `<br><strong>${pageName}:</strong> Document title shows as: "${document.title}"`;

                    // Try to get title from opened window (may be blocked by CORS)
                    try {
                        const newWindow = window.open(url, '_blank');
                        setTimeout(() => {
                            if (newWindow && !newWindow.closed) {
                                try {
                                    result.innerHTML += `<br><strong>${pageName} (opened window):</strong> "${newWindow.document.title}"`;
                                    newWindow.close();
                                } catch (e) {
                                    result.innerHTML += `<br><strong>${pageName}:</strong> Cannot access opened window title (CORS)`;
                                }
                            }
                        }, 2000);
                    } catch (e) {
                        result.innerHTML += `<br><strong>Error:</strong> ${e.message}`;
                    }
                }, 500);
                return false;
            };

            const p = document.createElement('p');
            p.appendChild(link);
            document.getElementById('links').appendChild(p);
        }

        // Add links to check
        window.onload = function() {
            checkPageTitle('depression-therapy-ontario.html', 'Depression Page');
            checkPageTitle('anxiety-therapy-toronto.html', 'Anxiety Toronto (Working)');

            // Also show current page title
            document.getElementById('current-title').textContent = document.title;
        };
    </script>

    <div id="links">
        <h2>Click to check titles:</h2>
    </div>

    <div id="results">
        <h2>Results:</h2>
        <p><strong>Current page title:</strong> <span id="current-title"></span></p>
    </div>

    <h2>Manual Check Instructions:</h2>
    <ol>
        <li>Open <a href="depression-therapy-ontario.html" target="_blank">depression-therapy-ontario.html</a></li>
        <li>Look at the browser tab - what does it actually say?</li>
        <li>Compare to <a href="anxiety-therapy-toronto.html" target="_blank">anxiety-therapy-toronto.html</a></li>
    </ol>
</body>
</html>