<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Test - Next Step Therapy</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .metric { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .metric-value { font-size: 2em; font-weight: bold; color: #4A6B7A; }
        .metric-label { color: #666; text-transform: uppercase; font-size: 0.8em; }
    </style>
</head>
<body>
    <h1>🧪 Dashboard Data Test</h1>
    
    <div class="metric">
        <div class="metric-label">Total Impressions</div>
        <div class="metric-value" id="impressions">Loading...</div>
    </div>
    
    <div class="metric">
        <div class="metric-label">Total Clicks</div>
        <div class="metric-value" id="clicks">Loading...</div>
    </div>
    
    <div class="metric">
        <div class="metric-label">Average CTR</div>
        <div class="metric-value" id="ctr">Loading...</div>
    </div>
    
    <div class="metric">
        <div class="metric-label">Average Position</div>
        <div class="metric-value" id="position">Loading...</div>
    </div>
    
    <h2>📊 Raw Data</h2>
    <pre id="rawData">Loading...</pre>
    
    <h2>🔍 Debug Info</h2>
    <pre id="debugInfo">Loading...</pre>

    <script>
        // Test script to load and display dashboard data
        async function testDashboard() {
            try {
                console.log('🧪 Testing dashboard data loading...');
                
                // Try to fetch the data file directly
                const response = await fetch('/dashboard_data/dashboard_data.json');
                console.log('📡 Fetch response:', response.status, response.statusText);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('📊 Data loaded:', data);
                
                // Update display
                document.getElementById('impressions').textContent = data.summary.totalImpressions.toLocaleString();
                document.getElementById('clicks').textContent = data.summary.totalClicks.toLocaleString();
                document.getElementById('ctr').textContent = data.summary.averageCTR + '%';
                document.getElementById('position').textContent = data.summary.averagePosition;
                
                // Show raw data
                document.getElementById('rawData').textContent = JSON.stringify(data, null, 2);
                
                // Debug info
                document.getElementById('debugInfo').textContent = `
✅ Data loaded successfully!
📊 Pages: ${data.pages.length}
📈 Last updated: ${data.lastUpdated}
🔢 Total keywords: ${data.pages[0]?.keywords?.length || 0}
                `;
                
                console.log('✅ Dashboard test successful!');
                
            } catch (error) {
                console.error('❌ Dashboard test failed:', error);
                
                document.getElementById('impressions').textContent = 'ERROR';
                document.getElementById('clicks').textContent = 'ERROR';
                document.getElementById('ctr').textContent = 'ERROR';
                document.getElementById('position').textContent = 'ERROR';
                
                document.getElementById('debugInfo').textContent = `
❌ Error: ${error.message}
🔍 Check browser console for details
📁 Expected file: /dashboard_data/dashboard_data.json
                `;
            }
        }
        
        // Run test when page loads
        document.addEventListener('DOMContentLoaded', testDashboard);
    </script>
</body>
</html>
